<!DOCTYPE html>
<html>
<head>
    <title>My First Web Page</title>

    <!-- âœ… Link CSS -->
    <link rel="stylesheet" href="{{ url_for('static', filename='main.css') }}">

    <!-- âœ… Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css"
          rel="stylesheet"
          crossorigin="anonymous">
</head>

<body>

<div class="main-container">
  <div class="c">
    <h1 class="g">Google Stock Predictor</h1>
    <br><br>
    <p class="intro">An advanced ML model that predicts future stock prices with real-time accuracy.</p>
    <br><br><br><br>
    <h3>Would you like to predict future Google stock prices?</h3>
    <div class="btn-container">
      <button id="yesBtn" class="btn">Yes</button>
      <button  id="noBtn" class="btn">No</button>
    </div>
    <!-- âŒ No Button Modal -->
<div id="noModal" class="no-modal" style="display: none;">
  <div class="no-modal-content">
    <h2>Sorry ðŸ˜¢</h2>
    <p>This site is not for you.</p>
    <button id="closeModal" class="btn btn-light">Close</button>
  </div>
</div>

  </div>

  <div class="video-container">
    <video autoplay muted loop playsinline class="my-video">
      <source src="{{ url_for('static', filename='Hiring Linkedin Video Ad in Dark Blue Green 2D Illustration Style (1).mp4') }}" type="video/mp4">
      Your browser does not support the video tag.
    </video>
  </div>
</div>

<!-- âœ… Fullscreen Black Loading Screen -->
<div id="loading-screen" class="loading-container" style="display: none; background-color: black; justify-content: center; align-items: center; flex-direction: column; position: fixed; top: 0; left: 0; width: 100%; height: 100%;">
  <lottie-player
    src="{{ url_for('static', filename='Fast Stock Market App.json') }}"
    background="transparent"
    speed="1"
    style="width: 500px; height: 500px;"
    autoplay
    loop>
  </lottie-player>
  <p id="loading-text" style="color: white; font-size: 1.5rem; margin-top: 20px;">Fetching latest data...</p>
</div>

<!-- âœ… Scripts -->
<script src="https://unpkg.com/@lottiefiles/lottie-player@latest/dist/lottie-player.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"
        crossorigin="anonymous"></script>

<script>
  document.getElementById('yesBtn').addEventListener('click', function() {
      const loadingScreen = document.getElementById('loading-screen');
      const loadingText = document.getElementById('loading-text');

      // Show loading overlay
      loadingScreen.style.display = 'flex';
      loadingText.textContent = 'Fetching latest data...';

      // Store flag so that animation doesn't appear again when back button pressed
      sessionStorage.setItem('loadingShown', 'true');

      // After 3 seconds, change text
      setTimeout(function() {
          loadingText.textContent = 'Predicting future stock prices...';
      }, 3000);

      // After another 3 seconds, go to predict page
      setTimeout(function() {
          window.location.href = "{{ url_for('pridict') }}";
      }, 6000);
  });

  // When page loads, check if user came back (prevent showing loader)
  window.addEventListener('pageshow', function(event) {
      if (sessionStorage.getItem('loadingShown')) {
          document.getElementById('loading-screen').style.display = 'none';
          sessionStorage.removeItem('loadingShown');
      }
  });
  // âŒ NO Button Logic
const noBtn = document.getElementById('noBtn');
const modal = document.getElementById('noModal');
const closeModal = document.getElementById('closeModal');

noBtn.addEventListener('click', () => {
    modal.style.display = 'flex';
    document.body.style.overflow = 'hidden'; // Prevent background scroll
});

closeModal.addEventListener('click', () => {
    modal.style.display = 'none';
    document.body.style.overflow = 'auto';
});

// Close modal when clicking outside it
window.addEventListener('click', (e) => {
    if (e.target === modal) {
        modal.style.display = 'none';
        document.body.style.overflow = 'auto';
    }
});

</script>


</body>
</html>

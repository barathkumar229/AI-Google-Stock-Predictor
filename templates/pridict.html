<!DOCTYPE html>
<html>
<head>
    <title>Stock Prediction</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='pridictc.css') }}">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>

    <div class="container">
        <div class="chart">
            <canvas id="myChart"></canvas>
        </div>

 <div class="c">
    <h2>✨ Here You Go...</h2>
    <div class="pred-info">
        <p class="pred-label">Predicted Closing Price</p>
        <p class="pred-value">₹ {{ y_pred }}</p>
    </div>

    <div class="accuracy">
        <p>Model Accuracy: <span>90%</span></p>
    </div>

    <p class="note">
        Market conditions and geopolitical events may influence actual stock movements.
        Please consider this prediction as a data-driven estimate.
    </p>

    <div class="divider"></div>

    <p class="ai-text">
        Want an <span>AI-powered suggestion</span> to decide whether to buy or sell?
    </p>

      <a id="aiBtn" href="#" class="btn" onclick="showSignal()">Get AI Recommendation</a>

            <div id="loader"></div>
            <p id="signalText"></p>
        </div>
</div>

    <script>
        const ctx = document.getElementById('myChart');

        const labels = {{ x|tojson }};
        const dataValues = {{ Y|tojson }};

        const data = {
            labels: labels,
            datasets: [{
                label: 'Stock Close Price (Last 7 Days)',
                data: dataValues,
                backgroundColor: [
                    'rgba(255, 99, 132, 0.8)',
                    'rgba(255, 159, 64, 0.8)',
                    'rgba(255, 205, 86, 0.8)',
                    'rgba(75, 192, 192, 0.8)',
                    'rgba(54, 162, 235, 0.8)',
                    'rgba(153, 102, 255, 0.8)',
                    'rgba(201, 203, 207, 0.8)'
                ],
                borderColor: 'white',
                borderWidth: 1,
                borderRadius: 10
            }]
        };

        const config = {
            type: 'bar',
            data: data,
            options: {
                responsive: true,
                animation: {
                    duration: 2000,
                    easing: 'easeInOutQuad'
                },
                plugins: {
                    legend: {
                        labels: { color: 'white' }
                    },
                    tooltip: {
                        backgroundColor: 'rgba(0, 0, 0, 0.8)',
                        borderColor: 'rgba(0, 255, 255, 0.7)',
                        borderWidth: 1,
                        titleColor: '#00FFFF',
                        bodyColor: '#fff',
                        cornerRadius: 8,
                        padding: 12,
                        displayColors: false,
                        titleFont: { size: 14, weight: 'bold' },
                        bodyFont: { size: 13 },
                        callbacks: {
                            label: (context) => ' $ ' + context.parsed.y.toFixed(2)
                        }
                    }
                },
                scales: {
                    x: {
                        ticks: { color: 'white' },
                        grid: { display: false }
                    },
                    y: {
                        beginAtZero: false,
                        ticks: { color: 'white' },
                        grid: { display: false }
                    }
                }
            }
        };

        new Chart(ctx, config);
        // Modal functionality
const modal = document.getElementById('signalModal');
const btn = document.getElementById('showSignalBtn');
const closeBtn = document.querySelector('.close');

btn.addEventListener('click', () => {
    modal.style.display = 'flex';
});

closeBtn.addEventListener('click', () => {
    modal.style.display = 'none';
});

window.addEventListener('click', (event) => {
    if (event.target === modal) {
        modal.style.display = 'none';
    }
});
        function showSignal() {
            const btn = document.getElementById('aiBtn');
            const loader = document.getElementById('loader');
            const signalText = document.getElementById('signalText');

            btn.style.display = "none";
            loader.style.display = "block";
            signalText.style.opacity = "0";

            // Simulate a 3s loading effect before showing signal
            setTimeout(() => {
                loader.style.display = "none";
                signalText.textContent = "{{ signal }}";
                signalText.style.opacity = "1";
            }, 3000);
        }

    </script>


</body>
</html>

